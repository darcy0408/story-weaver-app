# Deployment-Focused Improvements

1. **Complete README for stakeholders** – `README.md:1-16` still contains Flutter boilerplate. Replace it with setup instructions (backend URLs, keys, subscription tiers), onboarding screenshots, and a three-step “Create a story” guide so testers, investors, and parents immediately grasp the product.
2. **Centralize backend URLs** – Widgets and services call `http://127.0.0.1:5000` directly (`lib/main_story.dart:155`, `lib/character_creation_screen_enhanced.dart:249`, etc.). Route all requests through `Environment.backendUrl` so flipping between staging/prod is a config change, not a search-and-replace across UI files.
3. **Externalize environment switching** – `lib/config/environment.dart:1-15` hard codes `isDevelopment`. Use build flavors or runtime config (.env, Remote Config) so QA/Ops can point builds at Railway without editing source and risking bad commits.
4. **Secure BYOK keys & subscriptions** – `ApiServiceManager` and `SubscriptionService` store secrets in `SharedPreferences`. Move to `flutter_secure_storage` (Keychain/Keystore) so user API keys and premium entitlements can’t be dumped or tampered with on rooted devices.
5. **Add crash/error reporting** – `lib/services/logger_service.dart:39-48` only prints logs. Wire Sentry/Crashlytics so launch issues (story failures, billing errors) reach the team with stack traces instead of quietly failing in production.
6. **Expand automated tests** – The repo still has the default `test/widget_test.dart`. Add integration tests that mock `ApiServiceManager` to ensure (a) feelings wheel data flows into prompts, (b) paywall limits behave, and (c) offline caching works. This guards against regressions as monetization and UX complexity grow.
7. **Improve backend call resilience** – `_generateStoryWithBackend` (lib/services/api_service_manager.dart:86-166) fires once and throws. Add timeouts, retry/backoff, and user-friendly errors so flaky connections don’t leave families stuck mid-story.
8. **Hook subscriptions to real billing** – `lib/subscription_service.dart:22-110` “upgrades” by writing JSON locally. Integrate StoreKit/BillingClient (or a backend receipt service) so paid tiers persist across reinstalls and devices, and revenue is auditable.
9. **Sync progression/unlocks server-side** – `lib/services/progression_service.dart:12-120` keeps engagement data locally. Mirror it to the backend per account/child so new devices inherit unlocks, and product can deliver analytics/parent dashboards.
10. **Finish personalization in StoryResultScreen** – `lib/story_result_screen.dart:450-455` still has TODOs (hydrate avatar appearance) and wisdom gems are static. Pull avatar/outfit data through, render export/share options, and tie it into the celebration dialogs already present to make the experience feel bespoke and worth paying for.

These ten steps harden config/security, enable real monetization, improve reliability, and add the polish parents expect from a paid therapeutic storytelling app.
